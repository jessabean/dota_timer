// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;require("coffee-script");u=require("socket.io");s=require("fs");i=require("express");l=require("path");r=i();h=require("redis");c=require("process");a=require("jade");t="http";e=c.env.PORT||8090;n=l.dirname(__dirname);f=new Date;if(t==="http"){o=require("http");p=o.createServer(r)}p.listen(e);console.log("App started on "+e);r.use("/public",i["static"](""+n+"/public"));r.use("/css",i["static"](""+n+"/css"));r.use("/js",i["static"](""+n+"/js"));r.use("/img",i["static"](""+n+"/img"));r.set("views",__dirname+"/../views");r.set("view engine","jade");r.get("/*",function(e,t){return t.render("index",{latestTime:f.getTime()})});d=u.listen(p);d.enable("browser client minification");d.enable("browser client gzip");d.set("log level",1);d.sockets.on("connection",function(e){e.emit("clock_reset",{newTime:f.toJSON()});return e.on("timer_was_reset",function(){console.log;f=new Date;e.emit("clock_reset",{newTime:f.toJSON()});return e.broadcast.emit("clock_reset",{newTime:f.toJSON()})})})}).call(this);